#!/usr/bin/env bash
# Usage: pyenv version-file-read <file>
set -e
[ -n "$PYENV_DEBUG" ] && set -x

VERSION_FILE="$1"

if [ -e "$VERSION_FILE" ]; then
  # Read the first non-whitespace word from the specified version file.
  # Be careful not to load it whole in case there's something crazy in it.
  IFS=$' \t\n\r'
  words=( $(cut -b 1-1024 "$VERSION_FILE" | sed -r -e 's/^\s+//' -e 's/\s.*//') )
  versions=("${words[@]}")

  if [ -n "$versions" ]; then
    IFS=":"
    echo "${versions[*]}"
    [ "$0" != "$BASH_SOURCE" ] && return || exit 0
  fi
fi

[ "$0" != "$BASH_SOURCE" ] && return 1 || exit 1
